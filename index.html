<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bracket Buster 2025</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 20px; background-color: #f0f2f5; color: #333; }
        h1 { text-align: center; color: #1a73e8; margin-bottom: 20px; }
        .controls { max-width: 600px; margin: 0 auto 30px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .controls h3 { margin-top: 0; color: #555; }
        .weight-input { display: flex; align-items: center; margin: 10px 0; }
        .weight-input label { width: 80px; font-weight: bold; color: #666; }
        .weight-input input { width: 100px; padding: 8px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px; }
        button { display: block; width: 200px; margin: 20px auto 0; padding: 12px; background-color: #1a73e8; color: white; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; transition: background-color 0.3s; }
        button:hover { background-color: #1557b0; }
        #bracket-results { max-width: 1200px; margin: 0 auto; }
        .bracket-container { display: flex; justify-content: space-between; flex-wrap: wrap; gap: 20px; }
        .region { flex: 1; min-width: 250px; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .region h3 { text-align: center; color: #1a73e8; margin-bottom: 15px; }
        .round { margin-bottom: 20px; border-bottom: 1px solid #ddd; padding-bottom: 15px; }
        .round:last-child { border-bottom: none; }
        .round h4 { margin: 0 0 10px; color: #555; font-size: 14px; text-transform: uppercase; }
        .matchup { display: flex; justify-content: space-between; align-items: center; padding: 8px; margin: 4px 0; background: #fafafa; border: 1px solid #eee; border-radius: 5px; font-size: 14px; }
        .team { flex: 1; text-align: left; }
        .final-four, .championship { margin-top: 30px; text-align: center; }
        .final-four h3, .championship h3 { color: #1a73e8; margin-bottom: 15px; }
        .championship .matchup { display: inline-block; width: 300px; background: #e8f0fe; border: 1px solid #1a73e8; }
        .champion { font-weight: bold; color: #d32f2f; margin-top: 10px; font-size: 18px; }
    </style>
</head>
<body>
    <h1>Bracket Buster 2025</h1>
    <div class="controls">
        <h3>Custom Weights (Must Sum to 1.0)</h3>
        <div class="weight-input"><label>AdjO:</label><input type="number" id="adjO" value="0.30" step="0.01" min="0" max="1"></div>
        <div class="weight-input"><label>AdjD:</label><input type="number" id="adjD" value="0.30" step="0.01" min="0" max="1"></div>
        <div class="weight-input"><label>AdjT:</label><input type="number" id="adjT" value="0.20" step="0.01" min="0" max="1"></div>
        <div class="weight-input"><label>Luck:</label><input type="number" id="luck" value="0.10" step="0.01" min="0" max="1"></div>
        <div class="weight-input"><label>Upset:</label><input type="number" id="upset" value="0.10" step="0.01" min="0" max="1"></div>
        <button onclick="predictTournament()">Predict Bracket</button>
    </div>
    <div id="bracket-results">
        <div class="bracket-container">
            <div class="region" id="east"></div>
            <div class="region" id="west"></div>
            <div class="region" id="south"></div>
            <div class="region" id="midwest"></div>
        </div>
        <div class="final-four" id="final-four"></div>
        <div class="championship" id="championship"></div>
    </div>

    <script>
        const teamsData = [ /* Your teamsData array unchanged */ ];

        const upsetProbabilities = {
            "1vs16": 0.01, "2vs15": 0.06, "3vs14": 0.15, "4vs13": 0.20,
            "5vs12": 0.35, "6vs11": 0.33, "7vs10": 0.40, "8vs9": 0.50,
            "1vs8": 0.15, "2vs7": 0.20, "3vs6": 0.25, "4vs5": 0.30
        };

        function calculateTeamScore(team, weights) {
            return (weights.AdjO * team.AdjO) +
                   (weights.AdjD * (200 - team.AdjD)) +
                   (weights.AdjT * team.AdjT) +
                   (weights.Luck * team.Luck * 100) +
                   (team.Momentum * 10);
        }

        function getUpsetProbability(seed1, seed2) {
            const matchup = `${Math.min(seed1, seed2)}vs${Math.max(seed1, seed2)}`;
            return upsetProbabilities[matchup] || 0.25;
        }

        function simulateMatchup(team1, team2, weights, round) {
            let score1 = calculateTeamScore(team1, weights);
            let score2 = calculateTeamScore(team2, weights);
            const random1 = 0.85 + Math.random() * 0.3;
            const random2 = 0.85 + Math.random() * 0.3;
            score1 *= random1;
            score2 *= random2;
            const seedDiff = Math.abs(team1.Seed - team2.Seed);
            const upsetChance = getUpsetProbability(team1.Seed, team2.Seed) * weights.Upset;
            const isUpsetPossible = Math.random() < upsetChance && seedDiff >= 3;
            if (isUpsetPossible && team1.Seed > team2.Seed) score1 *= 1.1;
            else if (isUpsetPossible && team2.Seed > team1.Seed) score2 *= 1.1;
            if (round === "Elite 8" || round === "Final Four" || round === "Championship") {
                if (team1.Seed < team2.Seed) score1 *= 1.05;
                else if (team2.Seed < team1.Seed) score2 *= 1.05;
            }
            return score1 > score2 ? team1 : team2;
        }

        function simulateRound(teams, weights, roundName) {
            const winners = [];
            for (let i = 0; i < teams.length - 1; i += 2) {
                const winner = simulateMatchup(teams[i], teams[i + 1], weights, roundName);
                winners.push(winner);
            }
            return winners;
        }

        function predictTournament() {
            const weights = {
                AdjO: parseFloat(document.getElementById("adjO").value),
                AdjD: parseFloat(document.getElementById("adjD").value),
                AdjT: parseFloat(document.getElementById("adjT").value),
                Luck: parseFloat(document.getElementById("luck").value),
                Upset: parseFloat(document.getElementById("upset").value)
            };

            const totalWeight = weights.AdjO + weights.AdjD + weights.AdjT + weights.Luck + weights.Upset;
            if (Math.abs(totalWeight - 1.0) > 0.01) {
                alert("Weights must sum to 1.0 (current sum: " + totalWeight.toFixed(2) + ")");
                return;
            }

            const regions = {
                "East": teamsData.filter(t => t.Region === "East").sort((a, b) => a.Seed - b.Seed),
                "West": teamsData.filter(t => t.Region === "West").sort((a, b) => a.Seed - b.Seed),
                "South": teamsData.filter(t => t.Region === "South").sort((a, b) => a.Seed - b.Seed),
                "Midwest": teamsData.filter(t => t.Region === "Midwest").sort((a, b) => a.Seed - b.Seed)
            };

            const firstFourWinners = {
                "East": [
                    simulateMatchup(regions["East"][8], regions["East"][9], weights, "First Four"),
                    simulateMatchup(regions["East"][15], regions["East"][16], weights, "First Four")
                ],
                "West": [
                    simulateMatchup(regions["West"][9], regions["West"][10], weights, "First Four")
                ],
                "South": [
                    simulateMatchup(regions["South"][13], regions["South"][14], weights, "First Four")
                ],
                "Midwest": [
                    simulateMatchup(regions["Midwest"][9], regions["Midwest"][10], weights, "First Four")
                ]
            };

            const bracket = {};
            for (const region in regions) {
                let round64Teams = [];
                if (region === "East") {
                    round64Teams = [
                        regions[region][0], regions[region][1], regions[region][2], regions[region][3],
                        regions[region][4], regions[region][5], regions[region][6], regions[region][7],
                        firstFourWinners["East"][0], regions[region][10], regions[region][11], regions[region][12],
                        regions[region][13], regions[region][14], regions[region][15], firstFourWinners["East"][1]
                    ];
                } else if (region === "West") {
                    round64Teams = [
                        regions[region][0], regions[region][1], regions[region][2], regions[region][3],
                        regions[region][4], regions[region][5], regions[region][6], regions[region][7],
                        regions[region][8], firstFourWinners["West"][0], regions[region][11], regions[region][12],
                        regions[region][13], regions[region][14], regions[region][15], regions[region][16]
                    ];
                } else if (region === "South") {
                    round64Teams = [
                        regions[region][0], regions[region][1], regions[region][2], regions[region][3],
                        regions[region][4], regions[region][5], regions[region][6], regions[region][7],
                        regions[region][8], regions[region][9], regions[region][10], regions[region][11],
                        regions[region][12], regions[region][13], firstFourWinners["South"][0]
                    ];
                } else if (region === "Midwest") {
                    round64Teams = [
                        regions[region][0], regions[region][1], regions[region][2], regions[region][3],
                        regions[region][4], regions[region][5], regions[region][6], regions[region][7],
                        regions[region][8], firstFourWinners["Midwest"][0], regions[region][11], regions[region][12],
                        regions[region][13], regions[region][14], regions[region][15], regions[region][16]
                    ];
                }

                bracket[region] = {
                    "Round of 64": round64Teams,
                    "Round of 32": simulateRound(round64Teams, weights, "Round of 32"),
                    "Sweet 16": null,
                    "Elite 8": null
                };
                bracket[region]["Sweet 16"] = simulateRound(bracket[region]["Round of 32"], weights, "Sweet 16");
                bracket[region]["Elite 8"] = simulateRound(bracket[region]["Sweet 16"], weights, "Elite 8");
            }

            const finalFourTeams = [
                bracket["East"]["Elite 8"][0], bracket["West"]["Elite 8"][0],
                bracket["South"]["Elite 8"][0], bracket["Midwest"]["Elite 8"][0]
            ];
            const semiFinals = simulateRound(finalFourTeams, weights, "Final Four");
            const championship = simulateRound(semiFinals, weights, "Championship");

            let html = "";
            for (const region in bracket) {
                html += `<div class="region"><h3>${region} Region</h3>`;
                if (firstFourWinners[region].length > 0) {
                    html += `<div class="round"><h4>First Four</h4>`;
                    firstFourWinners[region].forEach((winner, index) => {
                        const teams = index === 0 ? [regions[region][8], regions[region][9]] : [regions[region][15], regions[region][16]];
                        html += `<div class="matchup">
                                    <div class="team">(${teams[0].Seed}) ${teams[0].Team}</div>
                                    <div class="team">(${teams[1].Seed}) ${teams[1].Team}</div>
                                    <div class="winner">Winner: ${winner.Team}</div>
                                 </div>`;
                    });
                    html += `</div>`;
                }
                const rounds = ["Round of 64", "Round of 32", "Sweet 16", "Elite 8"];
                rounds.forEach(round => {
                    html += `<div class="round"><h4>${round}</h4>`;
                    const nextRound = round === "Round of 64" ? "Round of 32" : round === "Round of 32" ? "Sweet 16" : round === "Sweet 16" ? "Elite 8" : "Final Four";
                    for (let i = 0; i < bracket[region][round].length - 1; i += 2) {
                        const team1 = bracket[region][round][i];
                        const team2 = bracket[region][round][i + 1];
                        const winner = bracket[region][nextRound].includes(team1) ? team1 : team2;
                        html += `<div class="matchup">
                                    <div class="team">(${team1.Seed}) ${team1.Team}</div>
                                    <div class="team">(${team2.Seed}) ${team2.Team}</div>
                                    <div class="winner">Winner: ${winner.Team}</div>
                                 </div>`;
                    }
                    html += `</div>`;
                });
                html += `</div>`;
            }

            html += `<div class="final-four"><h3>Final Four</h3>`;
            for (let i = 0; i < semiFinals.length; i += 2) {
                const team1 = finalFourTeams[i];
                const team2 = finalFourTeams[i + 1];
                const winner = semiFinals.includes(team1) ? team1 : team2;
                html += `<div class="matchup">
                            <div class="team">(${team1.Seed}) ${team1.Team}</div>
                            <div class="team">(${team2.Seed}) ${team2.Team}</div>
                            <div class="winner">Winner: ${winner.Team}</div>
                         </div>`;
            }
            html += `</div>`;

            html += `<div class="championship"><h3>Championship</h3>`;
            html += `<div class="matchup">
                        <div class="team">(${semiFinals[0].Seed}) ${semiFinals[0].Team}</div>
                        <div class="team">(${semiFinals[1].Seed}) ${semiFinals[1].Team}</div>
                        <div class="winner">Winner: ${championship[0].Team}</div>
                     </div>`;
            html += `<div class="champion">Champion: ${championship[0].Team}</div></div>`;

            document.getElementById("bracket-results").innerHTML = html;
        }
    </script>
</body>
</html>
